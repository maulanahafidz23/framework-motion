{% extends 'base.html' %}

{% load static %}

{% block title %}Kelas | Motion Gym{% endblock %}

{% block content %}
<h2>Kelas Kebugaran</h2>
<p>Ikuti berbagai kelas kebugaran yang kami tawarkan:</p>
<div class="row g-4">
    {% for fitness_class in fitness_classes %}
    <div class="col-md-4">
        <div class="card shadow-custom">
            <!-- Gambar dinamis berdasarkan nama kelas -->
            <img src="{% static 'images/'|add:fitness_class.name|add:'.png' %}" 
                 class="card-img-top" alt="{{ fitness_class.name }}">
            <div class="card-body">
                <h5 class="card-title">{{ fitness_class.name }}</h5>
                <p class="card-text">
                    <strong>Pelatih:</strong> {{ fitness_class.trainer.name }}<br>
                    <strong>Jadwal:</strong> {{ fitness_class.schedule|date:"l, d M Y H:i" }}<br>
                    <strong>Harga:</strong> Rp {{ fitness_class.price|floatformat:2 }}<br>
                    <strong>Kuota:</strong> {{ fitness_class.members.count }} / {{ fitness_class.max_participants }}
                </p>
                {% if user.is_authenticated and fitness_class.members.count < fitness_class.max_participants %}
                <form action="" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Gabung</button>
                </form>
                {% else %}
                <button class="btn btn-secondary" disabled>
                    {% if fitness_class.members.count >= fitness_class.max_participants %}Penuh{% else %}Gabung{% endif %}
                </button>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
